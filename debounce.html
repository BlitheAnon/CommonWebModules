<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="utf-8">
    <title></title>
</head>

<body>
    <button type="button" name="button" onclick="multiClick1()">不防抖点击</button>
    <button type="button" name="button" id="btn">防抖点击</button>
    <main class="" id="main">

    </main>
</body>

<script type="text/javascript">
    //防抖函数
    //防抖函数原理：在事件被触发n秒后再执行回调，如果在这n秒内又被触发，则重新计时。
    //使用：
    //按钮提交场景：防止多次提交按钮，只执行最后提交的一次
    //服务端验证场景：表单验证需要服务端配合，只执行一段连续的输入事件的最后一次，
    //还有搜索联想词功能类似
    //防抖实现
    const debounce = (fn, delay) => {
        let timer = null;
        return (...args) => {
            clearTimeout(timer);
            timer = setTimeout(() => {
                fn.apply(this, args);
            }, delay);
        };
    };

    let main = document.getElementById("main");

    //防抖前
    function multiClick1() {
        let element = document.createElement('div');
        element.innerText = "不防抖点击";
        main.appendChild(element);
    }

    function debounceFn() {
        let element = document.createElement('div');
        element.innerText = "防抖点击";
        main.appendChild(element);
    }

    //防抖后
    let test = document.getElementById('btn');
    test.addEventListener('click', debounce(debounceFn, 500));
</script>

</html>
